language: node_js
dist: xenial
os: linux

node_js:
    - 15.3

# if using Ubuntu 16 need this library
# https://github.com/cypress-io/cypress-documentation/pull/1647
addons:
    apt:
        packages:
            - libgconf-2-4

cache:
    # cache both npm modules and Cypress binary
    directories:
        - ~/.npm
        - ~/.cache

script:
    - npm run build
    - npm run start:ci
    - kill $(jobs -p) || true